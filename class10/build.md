# Galaxy Lancer 遊戲說明

## 0. 遊戲引擎需求

- 使用 Pygame 進行遊戲開發

## 遊戲開發步驟

### 步驟 1: 基本遊戲模板與捲動背景

- 建立基本遊戲程式架構，程式碼組織分為七大區塊：
  - 載入套件區塊：引入必要的pygame、sys和os套件，以及pygame.locals中的常數
  - 定義函式區塊：宣告遊戲中使用的自訂函式，包括 `roll_bg()` 函式實現背景捲動效果
  - 初始化設定區塊：
    - 使用`os.chdir(sys.path[0])`切換至程式所在目錄
    - 使用`pygame.init()`初始化pygame
    - 建立時鐘物件控制遊戲速度
  - 載入圖片區塊：載入太空背景圖片 (image/space.png)
  - 遊戲視窗設定區塊：
    - 設定視窗標題為"Galaxy Lancer"
    - 取得背景圖片尺寸作為遊戲視窗大小
    - 初始化捲動背景所需變數 `roll_y = 0`
  - 玩家設定區塊：設定玩家初始狀態和相關變數
  - 主程式區塊：包含遊戲主迴圈
- 實現捲動背景功能：
  - 捲動邏輯：
    - 持續更新 `roll_y` 變數 (每次增加 10 像素)
    - 使用模運算確保無縫循環 `roll_y = (roll_y + 10) % bg_y`
    - 在上下兩部分繪製背景圖片實現連續捲動
- 提供基本遊戲迴圈功能：
  - 使用`clock.tick(60)`設定時鐘頻率為每秒30幀
  - 實現退出遊戲功能 (按X關閉視窗)
  - 提供按鍵事件處理：
    - F1鍵切換至全螢幕模式
    - ESC鍵返回視窗模式
  - 使用`pygame.display.update()`更新畫面

### 步驟 2: 加入玩家物件及太空船

- 創建 `Player` 類別管理玩家太空船：
  - 初始化函式 `__init__` 設定：
    - 位置與尺寸 (x, y, width, height)，預設尺寸為 80x80
    - 顏色 (用於測試或無圖片時)
    - 速度 (預設水平移動速度)
    - 太空船圖片 (sprites字典)
  - 設計 `draw` 方法在螢幕上繪製太空船
  - 設計 `handle_input` 方法封裝所有移動相關邏輯：
    - 接收按鍵狀態作為參數
    - 內部處理移動方向計算
    - 自動處理邊界檢測
    - 更新太空船位置
- 載入太空船圖片 (image/fighter_M.png)其他方向的圖片先不載入
- 實現四方向移動控制：
  - 使用上下左右方向鍵控制太空船移動
  - 每次按鍵移動設定的速度值，每次移動 10 像素
- 添加邊界檢測：
  - 在類別內部處理所有邊界檢測邏輯
  - 根據太空船尺寸進行邊界計算
- 太空船初始位置設為畫面中央，尺寸為 80x80
- 簡化主程式結構：
  - 只需獲取按鍵狀態
  - 將按鍵狀態傳給太空船物件處理
  - 保持主迴圈邏輯清晰簡潔

### 步驟 3: 實現轉向效果

- 載入太空船左右轉向圖片 (image/fighter_L.png, image/fighter_R.png)
- 將太空船圖片組織為字典，包含三種狀態：
  - 中間直飛 (image/fighter_M.png)
  - 左轉 (image/fighter_L.png)
  - 右轉 (image/fighter_R.png)
- 增強 `Player` 類別：
  - 添加 `facing_direction` 屬性記錄當前方向狀態
  - 在 `handle_input` 方法中根據移動方向自動更新方向狀態
  - 在 `draw` 方法中根據方向狀態選擇適當的太空船圖片
  - 當按左鍵時顯示左轉圖片
  - 當按右鍵時顯示右轉圖片
  - 其他情況顯示直飛圖片
- 動態計算太空船圖片的尺寸，以適應不同狀態的圖片大小
### 步驟 4: 添加火焰推進效果

- 載入太空船火焰圖片 (image/starship_burner.png)
- 擴展 `Player` 類別：
  - 新增初始化參數 `burner_img`，讓使用者可自訂傳入火焰圖片
  - 在 `__init__` 方法中將 `burner_img` 設為火焰動畫用圖片
  - 添加火焰動畫相關屬性及方法
  - 設定變數 `burn_shift` 控制火焰上下晃動
  - 每幀更新位移值：`burn_shift = (burn_shift + 2) % 12`  # 循環0~11
  - 火焰寬度動態設為太空船寬度的1/4，高度等比例縮放
  - 火焰固定在太空船底部，但有微小的位移變化
- 修改 `Player` 類的 `draw` 方法：
  - 先繪製火焰，再繪製太空船，確保正確的圖層順序
  - 計算火焰與太空船的相對位置關係，並根據太空船寬度動態調整火焰寬度
- 獲取火焰圖片的尺寸以便精確定位